# OllamaChatBot

Telegram-–±–æ—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Ollama –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ LLM-–º–æ–¥–µ–ª—å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π Kafka, Redis –∏ FastAPI –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

## üìã –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Kafka.
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤** –≤ Redis –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –º–æ–¥–µ–ª—å.
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –Ω–∞ FastAPI –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
- **Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Zookeeper, Kafka, Redis, Ollama, –±–æ—Ç).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–¥–µ–ª–∏ **Vikhr-Llama-3.2-1B-instruct** (HF) —á–µ—Ä–µ–∑ Ollama.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ [Docker](https://docs.docker.com/get-docker/) –∏ [Docker Compose](https://docs.docker.com/compose/install/).

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/sergey-brovko/OllamaChatBot.git
   cd OllamaChatBot
   ```
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
   ```bash
   docker-compose up --build
   ```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`):
```env
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
OLLAMA_MODEL=hf.co/Vikhrmodels/Vikhr-Llama-3.2-1B-instruct-GGUF:F16
OLLAMA_BASE_URL=http://ollama:11434
REDIS_URL=redis://redis:6379/0
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_TOPIC=chat_messages
```

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
1. **Telegram Bot (aiogram3)**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Kafka.
2. **Kafka**: –û—á–µ—Ä–µ–¥—å –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.
3. **Ollama Worker**: –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–¥–∞—á–∏ –∏–∑ Kafka ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ LLM ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Redis.
4. **Redis**: –ö—ç—à –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ—Ç–≤–µ—Ç–∞–º.
5. **FastAPI**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
6. **Zookeeper**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è Kafka-–∫–ª–∞—Å—Ç–µ—Ä–∞.

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
### –ß–µ—Ä–µ–∑ Telegram
1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram.
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
   ```
   /start
   –ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Kafka?
   ```

### –ß–µ—Ä–µ–∑ API
–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å:
```bash
curl -X POST -H "Content-Type: application/json" -d '{"prompt":"Why is the sky blue?"}' http://localhost:8000/generate
```
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–π request_id):
```bash
curl http://localhost:8000/result/<request_id>
```

## ü§ù –ö–∞–∫ –ø–æ–º–æ—á—å –ø—Ä–æ–µ–∫—Ç—É
- –°–æ–æ–±—â–∞–π—Ç–µ –æ –±–∞–≥–∞—Ö –≤ [Issues](https://github.com/sergey-brovko/OllamaChatBot/issues).
- –ü—Ä–∏—Å—ã–ª–∞–π—Ç–µ —É–ª—É—á—à–µ–Ω–∏—è —á–µ—Ä–µ–∑ Pull Requests.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

